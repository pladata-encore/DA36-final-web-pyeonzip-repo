{% extends 'layout/base.html'%}
{% load static %}
{% block content %}


<!-- ê²€ìƒ‰ë°”-->
<section class="search-main">
    <div class="container">
        <div class="search-main-title">í¸ì˜ì  ì‹ ìƒ ë¦¬ë·°, ì—¬ê¸° ë‹¤ ZIPì¤‘!</div>
        <div class="search-main-sub-title">í¸ZIP</div>
        <div class="col-md-5">
            <a class="input-group" href="{% url 'product:product_search' %}" style="text-decoration: none !important;">
                <span class="form-control disabled-input-like">ê²€ìƒ‰í•  ìƒí’ˆì„ ì…ë ¥í•´ ì£¼ì„¸ìš”</span>
                <button class="btn btn-primary">ğŸ”</button>
            </a>    
        </div>
    </div>    
</section>



<section class="latest-main">
    <div class="latest-main-text">
        <span>ğŸ”¥ ìµœì‹  ì œí’ˆì„ í™•ì¸í•´ ë³´ì„¸ìš”!</span>
    </div>
    <div class="container">
    <div class="product-scroll-container" id="product-list">
        {% for product in latest_product %}
            <a href="{% url 'product:product_detail' product.product_id %}" class="product-link">
                <div class="product-card">
                    <img src="{{ product.product_image_url }}" alt="{{ product.product_name}}" style="background: white;">
                    <div class="card-body">
                        <div class="card-title my-1">{{ product.product_name }}</div>
                        <div>ğŸ’° {{ product.product_price }}ì› | ğŸª {{ product.convenient_store_name }} | ğŸ·ï¸ {{ product.product_category_name }} </div>

                    </div>
                </div>
        </a>    
        {% endfor %}
    </div>
    </div>
    

    <div class="text-center mt-3 mb-3">
        <button class="btn btn-outline-secondary" type="button"><a href="{% url 'product:main' tab="LATEST"   %}">ë”ë³´ê¸° â–¶</a></button>
    </div>
</section>    

    <!--forë¬¸ìœ¼ë¡œ ìˆ˜ì • ì˜ˆì • test ì¤‘-->
<section class="ai-main">
    <div class="container">
        <div class="ai-main-text">
            <span>ğŸ¤– ë˜‘ë˜‘í•œ AI ë¦¬ë·° ë¶„ì„</span>
        </div>
        <div class="product-scroll-container" id="product-list">
            <div class="btn-group my-2" role="group">
{#                <button class="btn btn-outline-primary">ì „ì²´</button>#}
{#                <button class="btn btn-outline-primary">ë§›</button>#}
{#                <button class="btn btn-outline-primary">ê°€ì„±ë¹„</button>#}
{#                <button class="btn btn-outline-primary">í¸ë¦¬ì„±</button>#}
{#            </div>#}
        </div>
        
        <!--ìƒí’ˆëª©ë¡ ê°€ë¡œ ìŠ¤í¬ë¡¤-->
    <div class="product-scroll-container" id="product-list">
        {% for product in ai_product %}
            <a href="{% url 'product:product_detail' product.product_id %}" class="product-link">
                <div class="product-card">
                    <img src="{{ product.product_image_url }}" alt="{{ product.product_name}}" style="background: white;">
                    <div class="card-body">
                        <div class="card-title my-1">{{ product.product_name }}</div>
                        <div>ğŸ’° {{ product.product_price }}ì› | ğŸª {{ product.convenient_store_name }} | ğŸ·ï¸ {{ product.product_category_name }} </div>
                        
                        <div> ğŸ˜‹ë§› : {{ product.taste_score }} | ğŸ’¸ê°€ê²© : {{ product.price_score }} </div>

                    </div>
                </div>
        </a>    
        {% endfor %}
    </div>
    </div>
    
    
    <div class="text-center mt-3 mb-3">
        <button class="btn btn-outline-secondary" type="button"><a href="{% url 'product:main' tab="AI" %}">ë”ë³´ê¸° â–¶</a></button>
    </div>
    
</section>
{% endblock content %}

{% block script %}
<!-- JavaScript (ë“œë˜ê·¸ ìŠ¤í¬ë¡¤ ê¸°ëŠ¥ ì¶”ê°€) -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const scrollContainer = document.getElementById("product-list");
    
        let isDown = false;
        let startX;
        let scrollLeft;
        

    scrollContainer.addEventListener("mousedown", (e) => {
        isDown = true;
        scrollContainer.classList.add("active");
        startX = e.pageX - scrollContainer.offsetLeft;
        scrollLeft = scrollContainer.scrollLeft;
    });

    scrollContainer.addEventListener("mouseleave", () => {
        isDown = false;
        scrollContainer.classList.remove("active");
    });

    scrollContainer.addEventListener("mouseup", () => {
        isDown = false;
        scrollContainer.classList.remove("active");
    });

    scrollContainer.addEventListener("mousemove", (e) => {
        if (!isDown) return;
        e.preventDefault();
        const x = e.pageX - scrollContainer.offsetLeft;
        const walk = (x - startX) * 2; // ìŠ¤í¬ë¡¤ ì†ë„ ì¡°ì ˆ
        scrollContainer.scrollLeft = scrollLeft - walk;
    });
});
        

</script>
{% endblock script %}