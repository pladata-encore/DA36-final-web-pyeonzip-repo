{% load static %}
{% for product in page_obj %}
    <div class="col">
        <div class="product-card mb-3">
{#           <button type="button" class="btn">#}
                <a href="{% url 'product:product_detail' product_id=product.product_id %}" class="text-decoration-none">
                    {% if product.product_image_url %}
                        <img src="{{ product.product_image_url }}" class="img-fluid">
                    {% else %}
                        <img src="{% static 'images/logo.png' %}" class="rounded-circle" width="26"/>
                    {% endif%}
                    <div class="card-body g-2">
                        <div class="card-title">{{ product.product_name }}</div>
                        <div class="product-tags">    
                            <span class="tag">{{ product.product_price }}Ïõê</span>
                            <span class="tag">{{ product.convenient_store_name }}</span>
                            <span class="tag">{{ product.product_category_name }}</span>
                        </div>
                        
                            {% if tab == 'AI' %}
                            <div class="progress">
                                <div class="progress-bar custom-progress-bar" role="progressbar"
                                         aria-label="Basic example" aria-valuenow="{{ product.taste_score }}"
                                         aria-valuemin="0" aria-valuemax="100"
                                         style="width: {{ product.taste_score }}%; min-width: 0;">
                                </div>
                            </div>
                            <div class="progress">
                                <div class="progress-bar custom-progress-bar" role="progressbar"
                                         aria-label="Basic example" aria-valuenow="{{ product.price_score }}"
                                         aria-valuemin="0" aria-valuemax="100"
                                         style="width: {{ product.price_score }}%; min-width: 0;">
                                </div>
                            </div>
                            {% endif %}
                            <span class="text-body-secondary">‚ù§Ô∏è:{{ product.likes.count }}</span>
                            <span class="text-body-secondary">üóØÔ∏è:{{ product.Product_reviews.count }}</span>
                    </div>    
                </a>
{#            </button>#}
        </div>
    </div>
{% endfor %}

<nav aria-label="Page navigation example">
    <ul class="pagination justify-content-center">
        <!-- Ïù¥Ï†ÑÌéòÏù¥ÏßÄ ÏòÅÏó≠ ÏãúÏûë -->
        {% if page_obj.previous_page_number|add:-4 >= 0 %}
            <li class="page-item">
                <button class="page-link" onclick="filterProducts({{ page_obj.previous_page_number|add:-3 }})">
                    Previous
                </button>
            </li>
        {% endif %}
        <!-- Ïù¥Ï†ÑÌéòÏù¥ÏßÄ ÏòÅÏó≠ ÎÅù -->

        <!-- ÌéòÏù¥ÏßÄÎÑòÎ≤Ñ ÏòÅÏó≠ ÏãúÏûë -->
        {% for page_number in page_obj.paginator.page_range %}
                            {% if page_number >= page_obj.number|add:-3 and page_number <= page_obj.number|add:3 %}
                                {% if page_number == page_obj.number %}
                                    <li class="pagination-link active"><a class="page-link" href="#">{{ page_number }}</a></li>
                {% else %}
                    {# ÌòÑÏû¨ ÌéòÏù¥ÏßÄÍ∞Ä ÏïÑÎãå Í≤ΩÏö∞ #}
                    <li class="page-item">
                        <button class="page-link" onclick="filterProducts({{ page_number }})">{{ page_number }}</button>
                    </li>
                {% endif %}
            {% endif %}
        {% endfor %}
        <!-- ÌéòÏù¥ÏßÄÎÑòÎ≤Ñ ÏòÅÏó≠ ÎÅù -->

        <!-- Îã§ÏùåÌéòÏù¥ÏßÄ ÏòÅÏó≠ ÏãúÏûë -->
        {% if last_page >= page_obj.number|add:4 %}
           <button class="page-link" onclick="filterProducts({{ page_obj.next_page_number|add:+3 }})">
                    Next
            </button>
          {% endif %}
        <!-- Îã§ÏùåÌéòÏù¥ÏßÄ ÏòÅÏó≠ ÎÅù -->
    </ul>
</nav>
